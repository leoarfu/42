<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>LEO Architecture Fundamentals â€” LEOAF</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

<style>
/* ---------- RESET & BASE ---------- */
* { box-sizing: border-box; margin: 0; padding: 0; }

html {
    /* FIX: Prevents iOS from auto-zooming text in landscape mode */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    height: 100%;
    overflow-x: hidden;
}

body {
    font-family: 'Orbitron', sans-serif;
    background: #000;
    color: white;
    position: relative;
    width: 100%;
    /* FIX: Use custom variable for mobile browser height, fallback to 100vh */
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

/* Canvas Background */
#starsCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none; /* Let clicks pass through */
}

/* ---------- HEADER ---------- */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px clamp(20px, 5vw, 60px);
    position: relative;
    z-index: 10;
}

.logo {
    font-weight: 800;
    font-size: clamp(18px, 2vw, 24px);
    letter-spacing: 3px;
    user-select: none;
}
.logo span:first-child { color: white; }
.logo span:last-child { color: #ff004f; }

.nav-btn {
    background: transparent;
    border: 1px solid #ff004f;
    color: #ff004f;
    padding: 6px 14px;
    margin-left: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 12px;
    font-family: inherit;
    text-transform: uppercase;
}

.nav-btn:hover {
    background: #ff004f;
    color: black;
    box-shadow: 0 0 10px rgba(255, 0, 79, 0.5);
}

/* ---------- HERO ---------- */
.hero {
    text-align: center;
    padding: clamp(40px, 6vw, 70px) 20px 40px;
    position: relative;
    z-index: 1;
    min-height: 60vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.hero h1 {
    font-size: clamp(26px, 5vw, 44px);
    margin-bottom: 20px;
    font-weight: 800;
    line-height: 1.2;
    text-transform: uppercase;
}

.hero p {
    max-width: 650px;
    font-size: 15px;
    opacity: 0.85;
    line-height: 1.6;
}

.lightning {
    width: clamp(60px, 6vw, 110px);
    margin: 0 auto 18px;
    display: block;
    animation: boltGlow 3s ease-in-out infinite;
}

@keyframes boltGlow {
    0%, 100% { filter: drop-shadow(0 0 8px #ff004f); }
    50% { filter: drop-shadow(0 0 20px #00d9ff); }
}

/* Invader Animation */
.invader {
    position: fixed;
    font-size: clamp(26px, 3vw, 40px);
    top: 40%;
    left: -60px; /* Start slightly further off-screen */
    /* Use will-change for smoother mobile animation */
    will-change: transform;
    animation: orbitDrift 25s linear infinite;
    z-index: 2;
    cursor: pointer;
}

.invader-inner {
    display: inline-block;
    transform-origin: center;
}

@keyframes orbitDrift {
    0%   { transform: translate(0, -20px); }
    25%  { transform: translate(30vw, -60px); }
    50%  { transform: translate(65vw, 10px); }
    75%  { transform: translate(40vw, 60px); }
    100% { transform: translate(110vw, -10px); } /* Ends off-screen right */
}

/* ---------- CURRICULUM ---------- */
.curriculum {
    max-width: 1000px;
    margin: 30px auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
}

.phase-card {
    background: rgba(255,255,255,0.05);
    padding: 18px;
    margin-bottom: 12px;
    border-left: 3px solid #ff004f;
    transition: transform 0.3s ease, background 0.3s ease;
}

.phase-card:hover {
    background: rgba(0,217,255,0.1);
    transform: translateX(4px);
}

.phase-card h3 {
    margin: 0 0 6px;
    font-size: 16px;
    color: #00d9ff;
    text-transform: uppercase;
}

.phase-card p {
    margin: 0;
    font-size: 13px;
    opacity: 0.75;
}

/* ---------- FOOTER ---------- */
footer {
    text-align: center;
    padding: 40px 20px;
    opacity: 0.4;
    font-size: 12px;
    position: relative;
    z-index: 1;
    letter-spacing: 1px;
}

/* ---------- AUTH MODAL ---------- */
/* Using a class instead of inline styles for cleaner toggle logic */
.modal-overlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 100;
    backdrop-filter: blur(4px);
    /* FIX: Allow scrolling if modal content is taller than landscape screen */
    overflow-y: auto; 
    padding: 20px; 
}

.modal-overlay.active {
    display: flex;
}

.modal-content {
    background: #080808;
    padding: 30px;
    border: 1px solid #ff004f;
    box-shadow: 0 0 20px rgba(255, 0, 79, 0.2);
    max-width: 360px;
    width: 100%;
    text-align: center;
    position: relative;
    /* Animation for appearing */
    animation: modalPop 0.3s ease-out;
}

@keyframes modalPop {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.modal-content h2 {
    color: #ff004f;
    margin-bottom: 20px;
    text-transform: uppercase;
    font-size: 20px;
}

.modal-input {
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    background: rgba(255,255,255,0.05);
    border: 1px solid #333;
    color: white;
    font-family: 'Orbitron', sans-serif;
    font-size: 14px;
    outline: none;
    transition: border 0.3s;
}

.modal-input:focus {
    border-color: #00d9ff;
}

.auth-btn {
    background: transparent;
    border: 1px solid #ff004f;
    color: #ff004f;
    padding: 10px 20px;
    font-size: 12px;
    margin: 15px 5px 5px;
    cursor: pointer;
    transition: 0.3s ease;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-family: inherit;
    width: 45%;
}

.auth-btn:hover {
    background: #ff004f;
    color: black;
}

.close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: transparent;
    border: none;
    color: #666;
    font-size: 24px;
    cursor: pointer;
    transition: 0.2s ease;
    line-height: 1;
}

.close-btn:hover {
    color: #00d9ff;
}

.auth-message {
    color: #00d9ff;
    font-size: 12px;
    margin-top: 15px;
    min-height: 18px; /* Prevents jumping */
}
</style>
</head>
<body>

<canvas id="starsCanvas"></canvas>

<header>
    <div class="logo"><span>LEO</span><span>AF</span></div>
    <div>
        <button class="nav-btn" onclick="openModal('login')">Login</button>
        <button class="nav-btn" onclick="openModal('register')">Register</button>
    </div>
</header>

<section class="hero">
    <h1>LEO Architecture Fundamentals</h1>

    <svg class="lightning" viewBox="0 0 120 220">
        <polygon points="70,0 30,110 65,110 40,220 100,95 60,95" fill="url(#grad)" />
        <defs>
            <linearGradient id="grad" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#ff004f"/>
                <stop offset="50%" style="stop-color:#ff004f"/>
                <stop offset="50%" style="stop-color:#00d9ff"/>
                <stop offset="100%" style="stop-color:#00d9ff"/>
            </linearGradient>
        </defs>
    </svg>

    <div class="invader"><span class="invader-inner">ðŸ‘¾</span></div>

    <p>
        A structured learning system for mastering modern low-Earth-orbit satellite architecture â€”
        engineering, spectrum strategy, geopolitics, and full constellation design.
    </p>
</section>

<section class="curriculum">
    <div class="phase-card">
        <h3>Phase 0 â€” Why Space Is Having Its Rockstar Era</h3>
        <p>The shift. The players. The stakes.</p>
    </div>
    <div class="phase-card">
        <h3>Phase 1 â€” Learn the Physics (Before You Bend It)</h3>
        <p>Orbits, RF fundamentals, networking basics.</p>
    </div>
    <div class="phase-card">
        <h3>Phase 2 â€” Engineer the Constellation</h3>
        <p>Link budgets, spacecraft systems, architecture tradeoffs.</p>
    </div>
    <div class="phase-card">
        <h3>Phase 3 â€” Money, Power & Spectrum Battles</h3>
        <p>Regulation, sustainability, geopolitics.</p>
    </div>
    <div class="phase-card">
        <h3>Phase 4 â€” Choose Your Mission</h3>
        <p>Engineer. Strategist. Analyst. Architect.</p>
    </div>
    <div class="phase-card" style="border-color: #00d9ff;">
        <h3>Build Your Cosmic Empire</h3>
        <p>Design your own constellation. From requirements to pitch deck.</p>
    </div>
</section>

<footer>
    Â© 2026 LEOAF<br>ESTABLISHED IN THE FUTURE
</footer>

<div id="authModal" class="modal-overlay">
    <div class="modal-content">
        <button id="closeModal" class="close-btn">Ã—</button>
        <h2>Welcome</h2>
        <input id="emailInput" class="modal-input" type="email" placeholder="Email Address">
        <input id="passwordInput" class="modal-input" type="password" placeholder="Password">
        
        <div style="display:flex; justify-content:space-between;">
            <button id="loginBtn" class="auth-btn">Login</button>
            <button id="registerBtn" class="auth-btn">Register</button>
        </div>
        
        <p id="authMessage" class="auth-message"></p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

<script>
/* ----------------------------------------------------
   1. VIEWPORT & CANVAS LOGIC (Robust Mobile Fix)
   ---------------------------------------------------- */
const canvas = document.getElementById('starsCanvas');
const ctx = canvas.getContext('2d');
let stars = [];
const STAR_COUNT = 200;

// Fix for mobile 100vh issue (address bar resizing)
function setViewportHeight() {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}

function initStars() {
    stars = [];
    // Ensure we fill the current window dimensions
    const w = window.innerWidth;
    const h = window.innerHeight;
    
    for (let i = 0; i < STAR_COUNT; i++) {
        stars.push({
            x: Math.random() * w,
            y: Math.random() * h,
            size: Math.random() * 1.5 + 0.5,
            speed: Math.random() * 0.2 + 0.05,
            hue: Math.random() * 360
        });
    }
}

function resizeCanvas() {
    // Only resize if dimensions actually changed significantly
    // This prevents glitches when the mobile address bar scrolls away
    if (Math.abs(canvas.width - window.innerWidth) > 50 || 
        Math.abs(canvas.height - window.innerHeight) > 50) {
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        // Optional: Re-init stars if you want a fresh field on rotate
        // initStars(); 
    }
}

function animateStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    stars.forEach(star => {
        star.y -= star.speed;
        
        // Wrap around top to bottom
        if(star.y < 0) {
            star.y = canvas.height;
            star.x = Math.random() * canvas.width;
        }
        
        ctx.beginPath();
        ctx.fillStyle = `hsl(${star.hue}, 80%, 80%)`;
        ctx.arc(star.x, star.y, star.size, 0, Math.PI*2);
        ctx.fill();
    });
    requestAnimationFrame(animateStars);
}

// Master Resize Handler (Debounced)
let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
        setViewportHeight();
        resizeCanvas();
    }, 100);
});

// Initialization
setViewportHeight();
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
initStars();
animateStars();


/* ----------------------------------------------------
   2. UI INTERACTIONS (Invader & Modal)
   ---------------------------------------------------- */

// Invader Spin
const invaderEl = document.querySelector('.invader');
const invaderInner = document.querySelector('.invader-inner');

if(invaderEl && invaderInner) {
    invaderEl.addEventListener('click', () => {
        invaderInner.style.transition = 'transform 0.1s linear';
        let spinDegrees = 0;
        const spinInterval = setInterval(() => {
            spinDegrees += 60;
            invaderInner.style.transform = `rotate(${spinDegrees}deg)`;
        }, 50);

        setTimeout(() => {
            clearInterval(spinInterval);
            invaderInner.style.transition = 'transform 0.5s ease';
            invaderInner.style.transform = 'rotate(0deg)';
        }, 2000);
    });
}

// Modal Logic
const authModal = document.getElementById('authModal');
const authMessage = document.getElementById('authMessage');

function openModal(type) {
    authModal.classList.add('active');
    authMessage.innerText = ''; // Clear previous messages
    // Optional: Focus the email input automatically
    document.getElementById('emailInput').focus();
}

document.getElementById('closeModal').addEventListener('click', () => {
    authModal.classList.remove('active');
});

// Close modal if clicking outside the content box
authModal.addEventListener('click', (e) => {
    if (e.target === authModal) {
        authModal.classList.remove('active');
    }
});


/* ----------------------------------------------------
   3. SUPABASE AUTHENTICATION
   ---------------------------------------------------- */
const supabaseUrl = 'https://kpkpptqtuuhnbdntuluc.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtwa3BwdHF0dXVobmJkbnR1bHVjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExNTE2MjAsImV4cCI6MjA4NjcyNzYyMH0.qUgRlbvjhi_cB7PTmSJLm62YFf3nJyYtJsnqbP97FrM';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

const emailInput = document.getElementById('emailInput');
const passwordInput = document.getElementById('passwordInput');
const loginBtn = document.getElementById('loginBtn');
const registerBtn = document.getElementById('registerBtn');

// Register
registerBtn.addEventListener('click', async () => {
    const email = emailInput.value;
    const password = passwordInput.value;
    if(!email || !password) {
        authMessage.innerText = "Please enter both email and password.";
        return;
    }
    
    authMessage.innerText = "Processing...";
    const { data, error } = await supabase.auth.signUp({ email, password });
    
    if(error) {
        authMessage.innerText = error.message;
        authMessage.style.color = '#ff004f';
    } else {
        authMessage.innerText = 'Check your email to confirm registration!';
        authMessage.style.color = '#00d9ff';
    }
});

// Login
loginBtn.addEventListener('click', async () => {
    const email = emailInput.value;
    const password = passwordInput.value;
    if(!email || !password) {
        authMessage.innerText = "Please enter both email and password.";
        return;
    }

    authMessage.innerText = "Logging in...";
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    
    if(error) {
        authMessage.innerText = error.message;
        authMessage.style.color = '#ff004f';
    } else {
        authMessage.innerText = 'Login successful!';
        authMessage.style.color = '#00d9ff';
        setTimeout(() => {
            authModal.classList.remove('active');
            showDashboard(data.user);
        }, 1000);
    }
});

function showDashboard(user) {
    console.log("Logged in user:", user);
    alert("Welcome back, Commander. Initializing dashboard...");
}
</script>

</body>
</html>
