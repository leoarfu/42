<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, shrink-to-fit=no">
<title>Q2 ‚Äì Orbital Mechanics & Constellations 101 ‚Ä¢ LEOAF</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
* { box-sizing:border-box; margin:0; padding:0; }
body {
    background:#000;
    color:#f0f0f0;
    font-family:'Inter', sans-serif;
    line-height:1.6;
    min-height:100vh;
}
#starsCanvas { position:fixed; inset:0; z-index:-1; }

/* Header ‚Äì solid black, no bleed-through */
header {
    background:#000;
    border-bottom:1px solid #ff004f33;
    position:sticky;
    top:0;
    z-index:100;
    padding:1rem clamp(1.5rem,5vw,4rem);
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 16px #0008;
}
.logo {
    font-family:'Orbitron',sans-serif;
    font-size:clamp(1.4rem,4vw,2rem);
    font-weight:800;
    letter-spacing:3px;
    text-decoration:none;
}
.logo span:first-child { color:#fff; }
.logo span:last-child { color:#ff004f; }
.nav-left { display:flex; align-items:center; gap:2rem; }
.back-dashboard {
    color:#00d9ff;
    font-size:0.95rem;
    text-decoration:none;
    opacity:0.9;
}
.back-dashboard:hover { color:#39ff14; text-decoration:underline; opacity:1; }
.logoff-btn {
    background:transparent;
    border:1px solid #ff004f;
    color:#ff004f;
    padding:0.5rem 1rem;
    font-size:0.85rem;
    cursor:pointer;
    border-radius:4px;
}
.logoff-btn:hover {
    background:#ff004f;
    color:#000;
}

/* Content area ‚Äì safe from header overlap */
.content {
    max-width:960px;
    margin:0 auto;
    padding:clamp(100px,12vh,140px) 1.5rem 4rem;
}

/* Big friendly title */
h1 {
    font-family:'Orbitron',sans-serif;
    font-size:clamp(2.2rem,6vw,3.6rem);
    text-align:center;
    margin-bottom:1.5rem;
    letter-spacing:1px;
    color:#00d9ff;
}

/* Quarter checkbox ‚Äì top right, playful */
.check-container {
    position:absolute;
    top:clamp(110px,13vh,150px);
    right:1.5rem;
    display:flex;
    align-items:center;
    gap:0.8rem;
    cursor:pointer;
}
.check-label { font-size:0.95rem; color:#aaa; }
.custom-checkbox {
    width:32px;
    height:32px;
    border:2px solid #ff004f;
    border-radius:6px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:transparent;
    transition:0.2s;
}
.check-container:hover .custom-checkbox { box-shadow:0 0 12px #ff004f66; }
.completed .custom-checkbox {
    border-color:#39ff14;
    background:rgba(57,255,20,0.2);
}
.completed .custom-checkbox::after {
    content:'üöÄ';
    font-size:1.1rem;
}

/* Cards ‚Äì softer, more spacious */
.section-card {
    background:rgba(255,255,255,0.025);
    border:1px solid rgba(0,217,255,0.15);
    border-radius:12px;
    padding:2rem;
    margin:2.5rem 0;
    box-shadow:0 4px 20px #0008;
}
.section-card h2 {
    font-family:'Orbitron',sans-serif;
    color:#00d9ff;
    font-size:1.5rem;
    margin-bottom:1.2rem;
}

/* Accordion ‚Äì fun & clear */
.accordion-header {
    background:rgba(0,217,255,0.06);
    padding:1.1rem 1.4rem;
    border-radius:8px;
    margin:1rem 0;
    cursor:pointer;
    display:flex;
    align-items:center;
    gap:1rem;
    transition:all 0.2s ease;
    user-select:none;
}
.accordion-header:hover { background:rgba(0,217,255,0.12); transform:translateX(4px); }
.accordion-header.active { background:rgba(57,255,20,0.12); }
.accordion-header .check-small {
    width:24px;
    height:24px;
    flex-shrink:0;
}
.custom-checkbox-small {
    width:20px;
    height:20px;
    border:2px solid #888;
    border-radius:4px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.custom-checkbox-small.checked {
    border-color:#39ff14;
    background:rgba(57,255,20,0.25);
}
.custom-checkbox-small.checked::after { content:'‚úì'; color:#39ff14; font-weight:bold; }
.accordion-header h3 { margin:0; font-size:1.15rem; flex:1; }
.accordion-content {
    display:none;
    padding:1.6rem 1.4rem;
    background:rgba(0,0,0,0.35);
    border-radius:0 0 8px 8px;
    border:1px solid rgba(57,255,20,0.2);
    margin-top:-8px;
}
.accordion-content p, .accordion-content li { color:#ddd; }
.equation {
    font-family:monospace;
    background:#111;
    padding:1rem;
    border-radius:6px;
    margin:1.2rem 0;
    color:#00d9ff;
}
.code-snippet {
    background:#0a0a0a;
    padding:1rem;
    border-radius:6px;
    font-family:monospace;
    font-size:0.92rem;
    overflow-x:auto;
    margin:1.2rem 0;
    border-left:4px solid #39ff14;
}

/* Buttons inside content */
.mark-done-btn {
    margin-top:1.5rem;
    padding:0.7rem 1.4rem;
    background:rgba(57,255,20,0.2);
    border:none;
    border-radius:6px;
    color:#fff;
    cursor:pointer;
    font-size:0.95rem;
}
.mark-done-btn:hover { background:rgba(57,255,20,0.45); }

/* Note at bottom */
.mission-note {
    text-align:center;
    margin:5rem 0 3rem;
    font-size:1rem;
    color:#00d9ff88;
    font-style:italic;
}
</style>
</head>
<body>

<canvas id="starsCanvas"></canvas>

<header>
    <div class="nav-left">
        <a href="dashboard.html" class="logo"><span>LEO</span><span>AF</span></a>
        <a href="dashboard.html" class="back-dashboard">‚Üê Mission Dashboard</a>
    </div>
    <button id="logoffBtn" class="logoff-btn">ABORT</button>
</header>

<div class="content">

    <h1>Q2 ‚Äì Orbital Mechanics & Constellations 101</h1>

    <div class="check-container" id="quarterCheck">
        <div class="check-wrapper"><div class="custom-checkbox"></div></div>
        <span class="check-label">MARK QUARTER COMPLETE</span>
    </div>

    <div class="section-card">
        <h2>üéØ What you'll master this quarter</h2>
        <p>GEO satellites sit still. LEO ones zoom around the planet ~15 times a day. That's why handovers happen constantly and why constellations need hundreds or thousands of satellites.</p>
        <p>This quarter turns that "moving target" reality into intuition you can simulate and explain.</p>
        <p>By the end ‚Üí your first real orbit plots, pass predictions, and a solid mental model of why LEO behaves so differently from GEO.</p>
    </div>

    <div class="section-card">
        <h2>Core Topics ‚Äì click to dive in üöÄ</h2>

        <!-- Topic 1 -->
        <div class="accordion-header" data-target="topic1">
            <div class="check-small" data-id="q2_topic1"><div class="custom-checkbox-small"></div></div>
            <h3>1. Newton‚Äôs law of gravitation & centripetal force balance</h3>
        </div>
        <div id="topic1" class="accordion-content">
            <p>The force that keeps your coffee cup on the table also keeps satellites from flying off into space.</p>
            <div class="equation">
F_grav = G √ó M_earth √ó m / r¬≤  
= centripetal force = m √ó v¬≤ / r
            </div>
            <p>‚Üí Orbital velocity simplifies to:</p>
            <div class="equation">v = ‚àö(G M_earth / r)</div>
            <p><strong>Quick numbers (550 km LEO):</strong> ~7.67 km/s (~27,600 km/h)</p>
            <p><strong>Why you care:</strong> Lower altitude = much faster satellites = frequent handovers and stronger Doppler.</p>
            <div class="code-snippet">
# Quick Python check
import math
G = 6.67430e-11
M = 5.972e24
R_earth = 6371000
r = R_earth + 550000
v = math.sqrt(G * M / r)
print(f"LEO speed: {v/1000:.2f} km/s")
            </div>
            <button class="mark-done-btn">Got it ‚Äì mark complete</button>
        </div>

        <!-- Topic 2 -->
        <div class="accordion-header" data-target="topic2">
            <div class="check-small" data-id="q2_topic2"><div class="custom-checkbox-small"></div></div>
            <h3>2. Kepler‚Äôs third law ‚Äì orbital period vs altitude</h3>
        </div>
        <div id="topic2" class="accordion-content">
            <p>T¬≤ ‚àù a¬≥ ‚Üí the higher you go, the slower you orbit.</p>
            <div class="equation">T = 2œÄ ‚àö(a¬≥ / Œº)     (Œº ‚âà 3.986 √ó 10¬π‚Å¥ m¬≥/s¬≤)</div>
            <p>Real examples:</p>
            <ul>
                <li>Starlink (~550 km) ‚Üí ~95‚Äì96 minutes per orbit</li>
                <li>ISS (~400 km) ‚Üí ~92 minutes</li>
                <li>GEO (35,786 km) ‚Üí exactly 1 sidereal day (~1436 min)</li>
            </ul>
            <p><strong>Fun fact:</strong> LEO satellites see ~15 sunrises/sunsets per day!</p>
            <button class="mark-done-btn">Got it ‚Äì mark complete</button>
        </div>

        <!-- Topic 3 -->
        <div class="accordion-header" data-target="topic3">
            <div class="check-small" data-id="q2_topic3"><div class="custom-checkbox-small"></div></div>
            <h3>3. Satellite visibility cone & pass duration</h3>
        </div>
        <div id="topic3" class="accordion-content">
            <p>How long can your terminal "see" one satellite?</p>
            <p>At 550 km altitude and 10¬∞ minimum elevation:</p>
            <ul>
                <li>Max distance to horizon ‚âà 2300‚Äì2500 km</li>
                <li>Typical pass duration: 4‚Äì12 minutes</li>
                <li>Zenith pass (directly overhead) ‚Üí longest visibility</li>
            </ul>
            <p><strong>Aviation angle:</strong> Plane at 900 km/h crosses a visibility cone very quickly ‚Üí need fast, predictive handovers.</p>
            <button class="mark-done-btn">Got it ‚Äì mark complete</button>
        </div>

        <!-- Remaining topics ‚Äì empty accordions ready to be filled -->
        <div class="accordion-header" data-target="topic4">
            <div class="check-small" data-id="q2_topic4"><div class="custom-checkbox-small"></div></div>
            <h3>4. LEO ground tracks & nodal precession (J‚ÇÇ effect)</h3>
        </div>
        <div id="topic4" class="accordion-content">
            <p>Coming soon ‚Äì fill me in! üåç</p>
        </div>

        <div class="accordion-header" data-target="topic5">
            <div class="check-small" data-id="q2_topic5"><div class="custom-checkbox-small"></div></div>
            <h3>5. Visibility, passes & handover frequency</h3>
        </div>
        <div id="topic5" class="accordion-content">
            <p>Coming soon ‚Äì fill me in! üîÑ</p>
        </div>

        <div class="accordion-header" data-target="topic6">
            <div class="check-small" data-id="q2_topic6"><div class="custom-checkbox-small"></div></div>
            <h3>6. Constellation fundamentals (Walker patterns, streets-of-coverage)</h3>
        </div>
        <div id="topic6" class="accordion-content">
            <p>Coming soon ‚Äì fill me in! ‚≠ê</p>
        </div>

        <div class="accordion-header" data-target="topic7">
            <div class="check-small" data-id="q2_topic7"><div class="custom-checkbox-small"></div></div>
            <h3>7. Tools & data sources (SGP4, TLEs, Celestrak, Skyfield, Poliastro)</h3>
        </div>
        <div id="topic7" class="accordion-content">
            <p>Coming soon ‚Äì fill me in! üõ†Ô∏è</p>
        </div>

    </div>

    <div class="section-card">
        <h2>üìö Best free resources to start</h2>
        <ul>
            <li>MIT OCW ‚Äì Aerospace orbital mechanics lectures</li>
            <li>YouTube ‚Äì Prof. Shane Ross Orbital Mechanics playlist</li>
            <li>Book (free excerpts) ‚Äì Fundamentals of Astrodynamics (Ch 1‚Äì4)</li>
            <li>Poliastro & Skyfield docs + example notebooks</li>
            <li>NASA GMAT ‚Äì free download & beginner guides</li>
        </ul>
    </div>

    <div class="section-card">
        <h2>üõ†Ô∏è Hands-on this quarter</h2>
        <ul>
            <li>Ground track plot of a real satellite (ISS or Starlink)</li>
            <li>Visibility & pass schedule over your city for 1 week</li>
            <li>LEO vs GEO velocity & period comparison script</li>
            <li>GitHub folder: /q2-orbital-mechanics</li>
            <li>Quick note: "Why LEO handovers matter for aviation"</li>
        </ul>
    </div>

    <div class="mission-note">
        Motion is the biggest difference between GEO and LEO.<br>
        Nail it here ‚Üí command constellations later. üåå
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// ‚îÄ‚îÄ Supabase Auth ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const supabaseUrl = 'https://kpkpptqtuuhnbdntuluc.supabase.co';
const supabaseKey = 'sb_publishable_aws8RQ085UqKFBUWfojluQ_o9R9WKBb';
const { createClient } = supabase;
const client = createClient(supabaseUrl, supabaseKey);

document.getElementById('logoffBtn')?.addEventListener('click', async () => {
    await client.auth.signOut();
    window.location.href = "index.html";
});

// ‚îÄ‚îÄ Quarter completion ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const quarterCheck = document.getElementById('quarterCheck');
const quarterId = 'q2-orbital-mechanics';

function loadQuarter() {
    if (localStorage.getItem(`leoaf_${quarterId}`) === 'true') {
        document.body.classList.add('completed');
    }
}

quarterCheck?.addEventListener('click', () => {
    document.body.classList.toggle('completed');
    localStorage.setItem(`leoaf_${quarterId}`, document.body.classList.contains('completed'));
});
loadQuarter();

// ‚îÄ‚îÄ Accordion open/close ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.accordion-header').forEach(header => {
    header.addEventListener('click', e => {
        if (e.target.closest('.check-small')) return; // don't toggle when clicking checkbox
        const target = document.getElementById(header.dataset.target);
        const isOpen = target.style.display === 'block';
        target.style.display = isOpen ? 'none' : 'block';
        header.classList.toggle('active', !isOpen);
    });
});

// ‚îÄ‚îÄ Per-topic completion ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.mark-done-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const content = btn.closest('.accordion-content');
        const header = content.previousElementSibling;
        const cb = header.querySelector('.custom-checkbox-small');
        const id = header.querySelector('.check-small')?.dataset.id;

        cb?.classList.add('checked');
        if (id) localStorage.setItem(`leoaf_${id}`, 'true');
    });
});

// Restore per-topic checks
document.querySelectorAll('.check-small').forEach(el => {
    const id = el.dataset.id;
    if (localStorage.getItem(`leoaf_${id}`) === 'true') {
        el.querySelector('.custom-checkbox-small')?.classList.add('checked');
    }
});

// Stars (optional ‚Äì remove canvas + this block if unwanted)
const canvas = document.getElementById('starsCanvas');
if (canvas) {
    const ctx = canvas.getContext('2d');
    let stars = [];
    function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        stars = [];
        for(let i=0; i<300; i++){
            stars.push({
                x:Math.random()*canvas.width,
                y:Math.random()*canvas.height,
                size:Math.random()*1.2+0.3,
                speed:Math.random()*0.4+0.1
            });
        }
    }
    function animate(){
        ctx.fillStyle='rgba(0,0,0,0.1)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        stars.forEach(s=>{
            s.y += s.speed;
            if(s.y > canvas.height) s.y = 0;
            ctx.fillStyle='#fff';
            ctx.fillRect(s.x,s.y,s.size,s.size);
        });
        requestAnimationFrame(animate);
    }
    init(); animate();
    window.addEventListener('resize', init);
}
</script>
</body>
</html>
